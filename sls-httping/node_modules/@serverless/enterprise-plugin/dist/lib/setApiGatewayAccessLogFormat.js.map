{"version":3,"sources":["../../src/lib/setApiGatewayAccessLogFormat.js"],"names":["require","API_GATEWAY_LOG_FORMAT","ctx","sls","service","custom","enterprise","collectApiGatewayLogs","provider","logs","restApi","format","JSON","stringify"],"mappings":";;;;;;;eAAmCA,OAAO,CAAC,YAAD,C;IAAlCC,sB,YAAAA,sB;;eAEO,kBAACC,GAAD,EAAS;AACtB,MACEA,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBC,MAAhB,IACAH,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,UADvB,IAEAJ,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,UAAvB,CAAkCC,qBAAlC,KAA4D,KAH9D,EAIE;AACA;AACD;;AAED,MAAI,CAACL,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBI,QAAhB,CAAyBC,IAA9B,EAAoC;AAClCP,IAAAA,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBI,QAAhB,CAAyBC,IAAzB,GAAgC,EAAhC;AACD;;AACD,MACE,CAACP,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBI,QAAhB,CAAyBC,IAAzB,CAA8BC,OAA/B,IACA,OAAOR,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBI,QAAhB,CAAyBC,IAAzB,CAA8BC,OAArC,KAAiD,QAFnD,EAGE;AACAR,IAAAA,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBI,QAAhB,CAAyBC,IAAzB,CAA8BC,OAA9B,GAAwC,EAAxC;AACD;;AACDR,EAAAA,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBI,QAAhB,CAAyBC,IAAzB,CAA8BC,OAA9B,CAAsCC,MAAtC,GAA+CC,IAAI,CAACC,SAAL,CAAeZ,sBAAf,CAA/C;AACD,C","sourcesContent":["const { API_GATEWAY_LOG_FORMAT } = require('./utils.js')\n\nexport default (ctx) => {\n  if (\n    ctx.sls.service.custom &&\n    ctx.sls.service.custom.enterprise &&\n    ctx.sls.service.custom.enterprise.collectApiGatewayLogs === false\n  ) {\n    return\n  }\n\n  if (!ctx.sls.service.provider.logs) {\n    ctx.sls.service.provider.logs = {}\n  }\n  if (\n    !ctx.sls.service.provider.logs.restApi ||\n    typeof ctx.sls.service.provider.logs.restApi !== 'object'\n  ) {\n    ctx.sls.service.provider.logs.restApi = {}\n  }\n  ctx.sls.service.provider.logs.restApi.format = JSON.stringify(API_GATEWAY_LOG_FORMAT)\n}\n"],"file":"setApiGatewayAccessLogFormat.js"}